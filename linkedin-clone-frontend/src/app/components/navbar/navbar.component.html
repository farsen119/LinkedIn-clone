<nav class="navbar">
  <div class="nav-container">
    <div class="nav-logo">
      <a routerLink="/">LinkedIn Clone</a>
    </div>

    <div class="nav-menu">
      <a routerLink="/" class="nav-link">Home</a>
      
      <ng-container *ngIf="!isLoggedIn; else loggedInMenu">
        <a routerLink="/login" class="nav-link">Sign In</a>
        <button routerLink="/register" class="signup-btn">Sign Up</button>
      </ng-container>

                                                 <ng-template #loggedInMenu>
                                          <div class="user-menu">
                       <div class="user-info">
                         <img 
                           *ngIf="user?.profile_photo" 
                           [src]="user.profile_photo" 
                           alt="Profile" 
                           class="user-avatar"
                           (click)="toggleProfilePopup($event)"
                         >
                         <div *ngIf="!user?.profile_photo" class="user-avatar-placeholder" (click)="toggleProfilePopup($event)">
                           {{ user?.first_name?.charAt(0) }}{{ user?.last_name?.charAt(0) }}
                         </div>
                         <span class="dropdown-arrow" [class.open]="showProfilePopup" (click)="toggleProfilePopup($event)">â–¼</span>
                       </div>
                       <button (click)="logout()" class="logout-btn">Logout</button>
                     </div>

                     <!-- Profile Popup -->
                     <div *ngIf="showProfilePopup" class="profile-popup">
                       <div class="popup-header">
                         <img 
                           *ngIf="user?.profile_photo" 
                           [src]="user.profile_photo" 
                           alt="Profile" 
                           class="popup-avatar"
                         >
                         <div *ngIf="!user?.profile_photo" class="popup-avatar-placeholder">
                           {{ user?.first_name?.charAt(0) }}{{ user?.last_name?.charAt(0) }}
                         </div>
                         <div class="popup-user-info">
                           <h3 class="popup-name">{{ user?.first_name }} {{ user?.last_name }}</h3>
                           <p class="popup-email">{{ user?.email }}</p>
                         </div>
                       </div>
                                               <div class="popup-bio">
                          <h4>Bio</h4>
                          <p *ngIf="user?.bio; else noBio">{{ user.bio }}</p>
                          <ng-template #noBio>
                            <p class="no-bio">No bio added yet.</p>
                          </ng-template>
                        </div>
                        <div class="popup-actions">
                          <a routerLink="/profile" (click)="closeProfilePopup()" class="popup-profile-btn">View Profile</a>
                          <button (click)="closeProfilePopup()" class="popup-close-btn">Close</button>
                        </div>
                     </div>
                  </ng-template>
    </div>
  </div>
</nav>
